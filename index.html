<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ü¶Ä Asie du Sud-Est 2026 ‚Äî Dorian & Monica</title>
<meta name="description" content="Notre itin√©raire de 62 jours √† travers le Vietnam, la Tha√Ølande et la Malaisie.">
<meta property="og:title" content="Asie du Sud-Est 2026 ‚Äî Dorian & Monica">
<meta property="og:description" content="62 jours ¬∑ 3 pays ¬∑ 15 villes ¬∑ Oct-D√©c 2026">
<meta property="og:type" content="website">
<link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body { width: 100%; height: 100%; font-family: 'Inter', system-ui, sans-serif; overflow: hidden; background: #0a0a1e; }
  #map { width: 100%; height: 100%; }

  /* Title */
  .title-box {
    position: absolute; top: 12px; left: 50%; transform: translateX(-50%); z-index: 1000;
    background: linear-gradient(135deg, rgba(10,10,30,0.94), rgba(20,20,50,0.92));
    backdrop-filter: blur(12px); padding: 12px 28px; border-radius: 14px;
    text-align: center; border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 8px 32px rgba(0,0,0,0.4); pointer-events: none;
    max-width: 90vw;
  }
  .title-box h1 { font-size: 20px; color: #fff; font-weight: 800; letter-spacing: -0.5px; }
  .title-box .sub { font-size: 11px; color: rgba(255,255,255,0.5); margin-top: 2px; }

  /* Stats */
  .stats-box {
    position: absolute; top: 12px; right: 12px; z-index: 1000;
    background: linear-gradient(135deg, rgba(10,10,30,0.94), rgba(20,20,50,0.92));
    backdrop-filter: blur(12px); padding: 12px 16px; border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  }
  .stat { text-align: center; margin-bottom: 8px; }
  .stat:last-child { margin-bottom: 0; }
  .stat-num { font-size: 20px; font-weight: 800; color: #fff; line-height: 1; }
  .stat-label { font-size: 8px; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 1px; font-weight: 600; }

  /* Legend */
  .legend-box {
    position: absolute; bottom: 16px; left: 50%; transform: translateX(-50%); z-index: 1000;
    background: linear-gradient(135deg, rgba(10,10,30,0.94), rgba(20,20,50,0.92));
    backdrop-filter: blur(12px); padding: 8px 20px; border-radius: 10px;
    display: flex; gap: 16px; align-items: center; flex-wrap: wrap; justify-content: center;
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 4px 20px rgba(0,0,0,0.3); max-width: 95vw;
  }
  .leg { display: flex; align-items: center; gap: 5px; font-size: 11px; color: rgba(255,255,255,0.7); font-weight: 500; white-space: nowrap; }
  .leg-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
  .leg-line { width: 18px; height: 3px; border-radius: 2px; flex-shrink: 0; }
  .leg-dash { width: 18px; height: 0; border-top: 2px dashed rgba(255,255,255,0.4); flex-shrink: 0; }

  /* Sidebar */
  .sidebar {
    position: absolute; top: 0; left: 0; bottom: 0; width: 340px; z-index: 1001;
    background: linear-gradient(180deg, rgba(10,10,30,0.97), rgba(15,15,40,0.97));
    backdrop-filter: blur(16px); overflow-y: auto; transform: translateX(-100%);
    transition: transform 0.3s ease; border-right: 1px solid rgba(255,255,255,0.06);
    scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.15) transparent;
  }
  .sidebar.open { transform: translateX(0); }
  .sidebar-header {
    position: sticky; top: 0; padding: 16px 20px; display: flex; justify-content: space-between; align-items: center;
    background: rgba(10,10,30,0.95); border-bottom: 1px solid rgba(255,255,255,0.06); z-index: 1;
  }
  .sidebar-header h2 { font-size: 15px; color: #fff; font-weight: 700; }
  .sidebar-close { background: none; border: none; color: rgba(255,255,255,0.5); font-size: 22px; cursor: pointer; padding: 4px; }
  .sidebar-close:hover { color: #fff; }

  .stop-item {
    padding: 12px 20px; display: flex; align-items: center; gap: 12px;
    border-bottom: 1px solid rgba(255,255,255,0.04); cursor: pointer;
    transition: background 0.15s;
  }
  .stop-item:hover { background: rgba(255,255,255,0.04); }
  .stop-item.active { background: rgba(255,255,255,0.08); }
  .stop-num {
    width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
    font-size: 12px; font-weight: 800; color: #fff; flex-shrink: 0;
    box-shadow: 0 0 0 2px rgba(255,255,255,0.2);
  }
  .stop-details { flex: 1; min-width: 0; }
  .stop-name { font-size: 13px; font-weight: 600; color: #fff; }
  .stop-meta { font-size: 11px; color: rgba(255,255,255,0.4); margin-top: 1px; }
  .stop-transport { font-size: 10px; color: rgba(255,255,255,0.25); margin-top: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

  .country-divider {
    padding: 8px 20px; font-size: 11px; font-weight: 700; letter-spacing: 1px;
    text-transform: uppercase; color: rgba(255,255,255,0.3);
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }

  /* Toggle button */
  .sidebar-toggle {
    position: absolute; top: 80px; left: 12px; z-index: 1000;
    background: linear-gradient(135deg, rgba(10,10,30,0.94), rgba(20,20,50,0.92));
    backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08);
    color: #fff; width: 40px; height: 40px; border-radius: 10px; cursor: pointer;
    display: flex; align-items: center; justify-content: center; font-size: 18px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.3); transition: opacity 0.3s;
  }
  .sidebar-toggle:hover { background: rgba(30,30,60,0.95); }
  .sidebar.open ~ .sidebar-toggle { opacity: 0; pointer-events: none; }

  /* Markers */
  .marker-pin {
    width: 30px; height: 30px; border-radius: 50%; display: flex;
    align-items: center; justify-content: center; font-size: 12px;
    font-weight: 800; color: #fff; cursor: pointer;
    box-shadow: 0 0 0 3px rgba(255,255,255,0.2), 0 4px 12px rgba(0,0,0,0.5);
  }
  .marker-pin.small { width: 24px; height: 24px; font-size: 10px; }
  .marker-pin.large { width: 36px; height: 36px; font-size: 14px; }
  .marker-pin.vietnam { background: linear-gradient(135deg, #e74c3c, #c0392b); }
  .marker-pin.thailand { background: linear-gradient(135deg, #f39c12, #e67e22); }
  .marker-pin.malaysia { background: linear-gradient(135deg, #3498db, #2980b9); }

  /* City labels */
  .city-tag {
    padding: 2px 7px; border-radius: 5px; font-size: 10px;
    font-weight: 600; white-space: nowrap; color: #fff;
    background: rgba(10,10,30,0.8); border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 2px 6px rgba(0,0,0,0.3); pointer-events: none;
  }

  /* Popup */
  .custom-popup .leaflet-popup-content-wrapper {
    background: linear-gradient(135deg, rgba(10,10,30,0.96), rgba(20,20,50,0.94)) !important;
    color: #fff !important; border-radius: 12px !important; padding: 0 !important;
    border: 1px solid rgba(255,255,255,0.1) !important;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5) !important;
    font-family: 'Inter', system-ui, sans-serif !important;
  }
  .custom-popup .leaflet-popup-content { margin: 14px 18px !important; min-width: 180px; }
  .custom-popup .leaflet-popup-tip { background: rgba(10,10,30,0.96) !important; }
  .custom-popup .leaflet-popup-close-button { color: rgba(255,255,255,0.4) !important; font-size: 18px !important; }
  .pop-title { font-size: 16px; font-weight: 700; }
  .pop-dates { font-size: 12px; color: rgba(255,255,255,0.5); margin-top: 4px; }
  .pop-transport { font-size: 11px; color: rgba(255,255,255,0.3); margin-top: 6px; padding-top: 6px; border-top: 1px solid rgba(255,255,255,0.08); }
  .pop-activities { font-size: 11px; color: rgba(255,255,255,0.45); margin-top: 6px; }
  .pop-food { font-size: 11px; color: rgba(255,255,255,0.45); margin-top: 4px; }

  .leaflet-control-attribution { display: none !important; }

  /* Mobile */
  @media (max-width: 600px) {
    .title-box { padding: 8px 16px; }
    .title-box h1 { font-size: 16px; }
    .stats-box { display: none; }
    .sidebar { width: 280px; }
    .legend-box { gap: 10px; padding: 6px 14px; }
    .leg { font-size: 10px; }
  }
</style>
</head>
<body>

<div class="title-box">
  <h1>ü¶Ä Asie du Sud-Est 2026</h1>
  <div class="sub">15 octobre ‚Üí 15 d√©cembre ¬∑ Dorian & Monica</div>
</div>

<div class="stats-box">
  <div class="stat"><div class="stat-num">62</div><div class="stat-label">Jours</div></div>
  <div class="stat"><div class="stat-num">3</div><div class="stat-label">Pays</div></div>
  <div class="stat"><div class="stat-num">15</div><div class="stat-label">Villes</div></div>
</div>

<div class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <h2>üìç Itin√©raire</h2>
    <button class="sidebar-close" onclick="toggleSidebar()">‚úï</button>
  </div>
  <div id="sidebar-content"></div>
</div>
<button class="sidebar-toggle" onclick="toggleSidebar()">‚ò∞</button>

<div class="legend-box">
  <div class="leg"><span class="leg-dot" style="background:linear-gradient(135deg,#e74c3c,#c0392b);"></span> üáªüá≥ Vietnam ¬∑ 22j</div>
  <div class="leg"><span class="leg-dot" style="background:linear-gradient(135deg,#f39c12,#e67e22);"></span> üáπüá≠ Tha√Ølande ¬∑ 19j</div>
  <div class="leg"><span class="leg-dot" style="background:linear-gradient(135deg,#3498db,#2980b9);"></span> üá≤üáæ Malaisie ¬∑ 20j</div>
  <div class="leg"><span class="leg-line" style="background:linear-gradient(90deg,#e74c3c,#f39c12);"></span> Route</div>
  <div class="leg"><span class="leg-dash"></span> ‚úàÔ∏è Vol</div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const stops = [
  { name:"Hano√Ø", emoji:"üèôÔ∏è", lat:21.0285, lng:105.8542, country:"vietnam", flag:"üáªüá≥", days:"J1-J4", dates:"15‚Üí18 oct", dur:"4j", dnum:4, transport:"", highlights:"Vieux Quartier, Temple de la Litt√©rature, Street Food Tour", food:"Pho Thin, Bun Cha, Egg Coffee" },
  { name:"Baie d'Halong", emoji:"üåä", lat:20.91, lng:107.18, country:"vietnam", flag:"üáªüá≥", days:"J5-J6", dates:"19‚Üí20 oct", dur:"2j", dnum:2, transport:"üöê Navette croisi√®re incluse", highlights:"Croisi√®re 2j/1n, kayak, grottes" },
  { name:"Ninh Binh", emoji:"üèûÔ∏è", lat:20.25, lng:105.97, country:"vietnam", flag:"üáªüá≥", days:"J7-J8", dates:"21‚Üí22 oct", dur:"2j", dnum:2, transport:"üöå Bus ¬∑ 2h ¬∑ 8-12‚Ç¨", highlights:"Tam Coc (barque), Mua Cave" },
  { name:"Hoi An & Hu·∫ø", emoji:"üèÆ", lat:15.88, lng:108.34, country:"vietnam", flag:"üáªüá≥", days:"J10-J15", dates:"24‚Üí29 oct", dur:"6j", dnum:6, transport:"‚úàÔ∏è Vol Hano√Ø‚ÜíDa Nang ¬∑ 1h15", flight:true, highlights:"Vieille ville, lanternes, Cit√© Imp√©riale Hu·∫ø", food:"Cao L·∫ßu, B√°nh M√¨, B√∫n B√≤ Hu·∫ø" },
  { name:"H√¥ Chi Minh", emoji:"üåÜ", lat:10.82, lng:106.63, country:"vietnam", flag:"üáªüá≥", days:"J16-J20", dates:"30 oct‚Üí3 nov", dur:"5j", dnum:5, transport:"‚úàÔ∏è Vol Da Nang‚ÜíHCMC ¬∑ 2h", flight:true, highlights:"Cu Chi, march√©s, vie nocturne", food:"B√°nh M√¨, C∆°m T·∫•m, Ph·ªü" },
  { name:"Can Tho", emoji:"üö£", lat:10.05, lng:105.75, country:"vietnam", flag:"üáªüá≥", days:"J21-J22", dates:"4‚Üí5 nov", dur:"2j", dnum:2, transport:"üöê Bus ¬∑ 3-4h", highlights:"March√© flottant Cai Rang" },
  { name:"Bangkok", emoji:"üèôÔ∏è", lat:13.76, lng:100.50, country:"thailand", flag:"üáπüá≠", days:"J23-J26", dates:"6‚Üí9 nov", dur:"4j", dnum:4, transport:"‚úàÔ∏è Vol HCMC‚ÜíBangkok ¬∑ 1h30", flight:true, highlights:"Temples, Chinatown, march√©s", food:"Pad Thai, Som Tam, Mango Sticky Rice" },
  { name:"Chiang Mai", emoji:"‚õ∞Ô∏è", lat:18.79, lng:98.99, country:"thailand", flag:"üáπüá≠", days:"J28-J33", dates:"11‚Üí16 nov", dur:"6j", dnum:6, transport:"üöÇ Train de nuit ¬∑ 12-14h ¬∑ 30‚Ç¨", highlights:"Elephant Nature Park, temples, cours de cuisine" },
  { name:"Koh Lanta", emoji:"üèñÔ∏è", lat:7.65, lng:99.04, country:"thailand", flag:"üáπüá≠", days:"J35-J40", dates:"18‚Üí23 nov", dur:"6j", dnum:6, transport:"‚úàÔ∏è Vol + üö¢ Ferry", flight:true, highlights:"Plages, snorkeling, Old Town" },
  { name:"Langkawi", emoji:"üèùÔ∏è", lat:6.35, lng:99.80, country:"malaysia", flag:"üá≤üáæ", days:"J43-J46", dates:"26‚Üí29 nov", dur:"4j", dnum:4, transport:"üö¢ Ferry ¬∑ 5h30 ¬∑ ~85‚Ç¨", highlights:"Sky Bridge, plages, mangroves" },
  { name:"Penang", emoji:"üé®", lat:5.42, lng:100.33, country:"malaysia", flag:"üá≤üáæ", days:"J47-J50", dates:"30 nov‚Üí3 d√©c", dur:"4j", dnum:4, transport:"üö¢ Ferry ¬∑ 2h45 ¬∑ 15‚Ç¨", highlights:"George Town street art, temples", food:"Char Kway Teow, Laksa, Cendol" },
  { name:"Cameron Highlands", emoji:"üåø", lat:4.47, lng:101.38, country:"malaysia", flag:"üá≤üáæ", days:"J51-J52", dates:"4‚Üí5 d√©c", dur:"2j", dnum:2, transport:"üöå Bus ¬∑ 4-5h", highlights:"Plantations de th√©, Mossy Forest" },
  { name:"Kuala Lumpur", emoji:"üèôÔ∏è", lat:3.14, lng:101.69, country:"malaysia", flag:"üá≤üáæ", days:"J53-J56", dates:"6‚Üí9 d√©c", dur:"4j", dnum:4, transport:"üöå Bus ¬∑ 4h", highlights:"Petronas, Batu Caves, Jalan Alor", food:"Nasi Lemak, Roti Canai, Satay" },
  { name:"Melaka", emoji:"üèõÔ∏è", lat:2.19, lng:102.25, country:"malaysia", flag:"üá≤üáæ", days:"J57-J58", dates:"10‚Üí11 d√©c", dur:"2j", dnum:2, transport:"üöå Bus ¬∑ 2h", highlights:"Jonker Street, histoire coloniale" },
  { name:"KL ‚Äî D√©part", emoji:"‚úàÔ∏è", lat:3.14, lng:101.69, country:"malaysia", flag:"üá≤üáæ", days:"J59-J62", dates:"12‚Üí15 d√©c", dur:"4j", dnum:4, transport:"‚úàÔ∏è Vol retour ¬∑ ~450‚Ç¨/pers", highlights:"Repos, shopping, derniers repas" },
];

const colors = { vietnam:'#e74c3c', thailand:'#f39c12', malaysia:'#3498db' };
const colorsLight = { vietnam:'#ff6b6b', thailand:'#ffd93d', malaysia:'#6bcfff' };
const countryNames = { vietnam:'üáªüá≥ Vietnam', thailand:'üáπüá≠ Tha√Ølande', malaysia:'üá≤üáæ Malaisie' };

// Build sidebar
function buildSidebar() {
  let html = '', lastCountry = '';
  stops.forEach((s, i) => {
    if (i === stops.length - 1) return; // skip duplicate KL
    if (s.country !== lastCountry) {
      html += `<div class="country-divider" style="color:${colors[s.country]}99;">${countryNames[s.country]}</div>`;
      lastCountry = s.country;
    }
    html += `<div class="stop-item" data-idx="${i}" onclick="flyTo(${i})">
      <div class="stop-num" style="background:linear-gradient(135deg,${colors[s.country]},${colors[s.country]}cc);">${i+1}</div>
      <div class="stop-details">
        <div class="stop-name">${s.emoji} ${s.name}</div>
        <div class="stop-meta">${s.dates} ¬∑ ${s.dur}</div>
        ${s.transport ? `<div class="stop-transport">${s.transport}</div>` : ''}
      </div>
    </div>`;
  });
  document.getElementById('sidebar-content').innerHTML = html;
}

function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('open');
}

function flyTo(idx) {
  const s = stops[idx];
  map.flyTo([s.lat, s.lng], 8, { duration: 1.2 });
  if (markers[idx]) markers[idx].openPopup();
  // highlight in sidebar
  document.querySelectorAll('.stop-item').forEach(el => el.classList.remove('active'));
  const el = document.querySelector(`.stop-item[data-idx="${idx}"]`);
  if (el) { el.classList.add('active'); el.scrollIntoView({ behavior: 'smooth', block: 'nearest' }); }
}

// Map
const map = L.map('map', { zoomControl: false, attributionControl: false }).setView([11.5, 103], 5);
L.control.zoom({ position: 'bottomright' }).addTo(map);

L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
  subdomains: 'abcd', maxZoom: 19
}).addTo(map);

// Bezier curve
function bezierCurve(from, to, n=40) {
  const dist = Math.sqrt(Math.pow(to[0]-from[0],2)+Math.pow(to[1]-from[1],2));
  const offset = dist * 0.35;
  const dx = to[1]-from[1], dy = to[0]-from[0];
  const len = Math.sqrt(dx*dx+dy*dy)||1;
  const cpLat = (from[0]+to[0])/2 + (dx/len)*offset;
  const cpLng = (from[1]+to[1])/2 - (dy/len)*offset;
  const pts = [];
  for (let i=0;i<=n;i++) {
    const t=i/n;
    pts.push([(1-t)*(1-t)*from[0]+2*(1-t)*t*cpLat+t*t*to[0], (1-t)*(1-t)*from[1]+2*(1-t)*t*cpLng+t*t*to[1]]);
  }
  return pts;
}

// Route lines
for (let i=0; i<stops.length-1; i++) {
  const from=[stops[i].lat,stops[i].lng], to=[stops[i+1].lat,stops[i+1].lng];
  const isFlight=stops[i+1].flight;
  const color=colors[stops[i+1].country]||colors[stops[i].country];
  const colorL=colorsLight[stops[i+1].country]||colorsLight[stops[i].country];

  if (isFlight) {
    const curve=bezierCurve(from,to);
    L.polyline(curve, {color:colorL,weight:8,opacity:0.1,lineCap:'round'}).addTo(map);
    L.polyline(curve, {color:'rgba(255,255,255,0.55)',weight:2.5,dashArray:'8 6',opacity:0.65,lineCap:'round'}).addTo(map);
    const mid=curve[Math.floor(curve.length/2)];
    L.marker(mid, {icon:L.divIcon({className:'',html:'<div style="font-size:13px;filter:drop-shadow(0 0 3px rgba(255,255,255,0.4));">‚úàÔ∏è</div>',iconAnchor:[7,7]}),interactive:false}).addTo(map);
  } else {
    L.polyline([from,to], {color:colorL,weight:6,opacity:0.12,lineCap:'round'}).addTo(map);
    L.polyline([from,to], {color:color,weight:3,opacity:0.8,lineCap:'round'}).addTo(map);
  }
}

// Markers
const markers = [];
const labelOffsets = {0:[-1,-18],1:[1,0],2:[-1,8],3:[1,-5],4:[-1,-5],5:[1,5],6:[-1,-8],7:[1,-5],8:[-1,0],9:[1,-8],10:[-1,0],11:[1,0],12:[-1,8],13:[1,0]};

stops.forEach((s, i) => {
  const sz = s.dnum>=5?'large':s.dnum<=2?'small':'';
  const icon = L.divIcon({
    className:'', html:`<div class="marker-pin ${sz} ${s.country}">${i+1}</div>`,
    iconSize: sz==='large'?[36,36]:sz==='small'?[24,24]:[30,30],
    iconAnchor: sz==='large'?[18,18]:sz==='small'?[12,12]:[15,15]
  });

  const popupHtml = `
    <div class="pop-title">${s.emoji} ${s.name}</div>
    <div class="pop-dates">${s.flag} ${s.dates} ¬∑ ${s.dur} (${s.days})</div>
    ${s.transport?`<div class="pop-transport">${s.transport}</div>`:''}
    ${s.highlights?`<div class="pop-activities">üìç ${s.highlights}</div>`:''}
    ${s.food?`<div class="pop-food">üçú ${s.food}</div>`:''}
  `;

  const marker = L.marker([s.lat,s.lng], {icon}).addTo(map);
  marker.bindPopup(popupHtml, {className:'custom-popup',closeButton:true,maxWidth:260});
  markers.push(marker);

  // Labels (skip last stop)
  if (i < 14) {
    const off = labelOffsets[i]||[1,0];
    const isLeft = off[0]<0;
    const labelIcon = L.divIcon({
      className:'', html:`<div class="city-tag">${s.name}</div>`,
      iconAnchor: isLeft?[120,10-off[1]]:[-18,10-off[1]]
    });
    L.marker([s.lat,s.lng], {icon:labelIcon, interactive:false}).addTo(map);
  }
});

buildSidebar();

// Open sidebar by default on desktop
if (window.innerWidth > 768) toggleSidebar();
</script>
</body>
</html>
